<!DOCTYPE html>
<html>
<head>
	<title>Trying JQuery</title>
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="require.js"></script>
	<script type="text/javascript" src="dropbox.min.js">
</script>
</head>

<body>
	<form action="" method="post" name="noteform">
		Note: <input type="text" value="Type your notes here..." name="note" onclick="clear();"> <br>
		<input type="button" value="Save" onclick="save();">
	</form>

	<script type="text/javascript">
	//var Dropbox = require(["dropbox.min"]);
	var client = new Dropbox.Client({
    	key: "NJo05Ex2ifA=|FuwYACznlMDmTchIp4AN5qegZ1KCzwMiNKfAjSspvw=="
	});
	client.authDriver(new Dropbox.Drivers.Redirect());
	client.authenticate(function(error,client){
		if (error){
			// Replace with a call to your own error-handling code.
    		//
    		// Don't forget to return from the callback, so you don't execute the code
    		// that assumes everything went well.
    		return showError(error);
  		}

  		// Replace with a call to your own application code.
  		//
  		// The user authorized your app, and everything went well.
  		// client is a Dropbox.Client instance that you can use to make API calls.
  		//doSomethingCool(client);
        alert("Autheticated");
	    client.writeFile("hello_world.txt", "Hello, world!\n", function(error, stat) {
  		if (error) {
    		return showError(error);  // Something went wrong.
  		}

  		alert("File saved as revision " + stat.revisionTag);
	});


	});

	var showError = function(error) {
  		switch (error.status) {
			case 401:
			// If you're using dropbox.js, the only cause behind this error is that
			// the user token expired.
            // Get the user through the authentication flow again.
                console.log("User token expired");
			break;

			case 404:
			// The file or folder you tried to access is not in the user's Dropbox.
            // Handling this error is specific to your application.
                console.log("File or folder is not in user's Dropbox");
			break;

			case 507:
			// The user is over their Dropbox quota.
            // Tell them their Dropbox is full. Refreshing the page won't help.
                console.log("Dropbox is full!");
			break;

			case 503:
			// Too many API requests. Tell the user to try again later.
            // Long-term, optimize your code to use fewer API calls.
                console.log("Too many API requests");
			break;

            case 400:  // Bad input parameter
                console.log("Bad input parameter");
            case 403:  // Bad OAuth request.
                console.log("Bad OAuth request.");
            case 405:  // Request method not expected
                console.log("Request method not expected");
			default:
			// Caused by a bug in dropbox.js, in your application, or in Dropbox.
            // Tell the user an error occurred, ask them to refresh the page.
                console.log("Caused by a bug in dropbox.js.... :( ");
		}
	};

	</script>

</body>
</html>
